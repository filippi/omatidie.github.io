<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Ommatidie</title>

    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Load TensorFlow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.2"></script>
    <!-- Load BodyPix -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2.0"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <script src='https://cdn.plot.ly/plotly-2.12.1.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js'></script>
    <script>
        d3.csv('https://raw.githubusercontent.com/filippi/ommatidie/main/scatterSetFoncier.csv', function (err, rows) {
            function unpack(rows, key) {
                return rows.map(function (row) {
                    return row[key];
                });
            }
            var trace1 = {
                x: unpack(rows, 'latitude'),
                y: unpack(rows, 'longitude'),
                z: unpack(rows, 'valeur_fonciere'),
                mode: 'markers',
                marker: {
                    size: 12,
                    line: {
                        color: 'rgba(217, 217, 217, 0.14)',
                        width: 0.5
                    },
                    opacity: 0.8
                },
                type: 'scatter3d'
            };

            var data = [trace1];
            var layout = {
                margin: {
                    l: 0,
                    r: 0,
                    b: 0,
                    t: 0
                },
                showLegend: true
            };

            //layout[:showLegend] = true

            var graphDiv = document.getElementById('myDiv')

            Plotly.newPlot(graphDiv, data, layout);

            var update = {
                scene: {
                    camera: {
                        center: {
                            x: 0,
                            y: 0,
                            z: 0
                        },
                        eye: {
                            x: 2,
                            y: 2,
                            z: 0.1
                        },
                        up: {
                            x: 0,
                            y: 0,
                            z: 1
                        }
                    }
                },
            };
        });
    </script>
</head>

<body>
    <div id="main">

        <div id='myDiv'>
            <!-- Plotly chart will be drawn inside this DIV -->
        </div>
        <div id="content">
            <h1>Face Touch Monitor</h1>

            <button id="start">Start monitoring</button>
            <div id="usageNoteMain" hidden>
                <canvas></canvas>
                <video id="myVid" autoplay playsinline></video>
            </div>
        </div>
    </div>
    <div id="loader" hidden></div>

    <script src="detect.js"></script>

</body>

</html>
