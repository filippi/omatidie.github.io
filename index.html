<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ommatidie</title>
 
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Load TensorFlow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.2"></script>
    <!-- Load BodyPix -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2.0"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet"> 
    <script src='https://cdn.plot.ly/plotly-2.12.1.min.js'></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js'></script>
    <script >
    d3.csv('https://raw.githubusercontent.com/plotly/datasets/master/3d-scatter.csv', function(err, rows){
function unpack(rows, key) {
	return rows.map(function(row)
	{ return row[key]; });}

var trace1 = {
	x:unpack(rows, 'x1'), y: unpack(rows, 'y1'), z: unpack(rows, 'z1'),
	mode: 'markers',
	marker: {
		size: 12,
		line: {
		color: 'rgba(217, 217, 217, 0.14)',
		width: 0.5},
		opacity: 0.8},
	type: 'scatter3d'
};

var trace2 = {
	x:unpack(rows, 'x2'), y: unpack(rows, 'y2'), z: unpack(rows, 'z2'),
	mode: 'markers',
	marker: {
		color: 'rgb(127, 127, 127)',
		size: 12,
		symbol: 'circle',
		line: {
		color: 'rgb(204, 204, 204)',
		width: 1},
		opacity: 0.8},
	type: 'scatter3d'};

var data = [trace1, trace2];
var layout = {margin: {
	l: 0,
	r: 0,
	b: 0,
	t: 0
  }};
var graphDiv = document.getElementById('myDiv')

Plotly.newPlot(graphDiv, data, layout);
        
var update = {
scene:{
          camera: {
          center: { x: 0, y: 0, z: 0 }, 
          eye: { x: 2, y: 2, z: 0.1 }, 
           up: { x: 0, y: 0, z: 1 }
            }
        },
};

});

</script> 
    
</head>

<body>
   
<div id="main">
    <canvas></canvas>
    <video id="myVid" autoplay playsinline></video>
    <div id="content">
        <h1>Face Touch Monitor</h1>
  
        <button id="start">Start monitoring</button>
        <div id="usageNoteMain">
         
        </div>
    </div>
</div>
<div id="loader"></div> 
<div id="dashboard">
    <div id="dashboardContent">
        <h3>Statistics</h3>
        <p>Status: <span id="userMessage">Click to the left to activate your webcam.</span></p>
        <div id="statsDiv" hidden>
            <p>Face touches:  <span id="touches"></span></p>
            <p>Last touch:  <span id="lastTouch"></span></p>
            <p>Touch rate per hour: <span id="perHour"></span></p>
            <p>FPS: <span id="fps"></span></p>
        </div>
        <h3>Controls</h3>
        <div id="controls">
            <label for="alertTimeOut">Time between alerts (s)</label>
            <input type="text" size=4 id="alertTimeOut" name="alertTimeOut" value="5"><br>

            <input type="checkbox" id="beepToggle" name="beepToggle" value="beepToggle"  >
            <label for="beepToggle">Beep on touch</label><br>

            <input type="checkbox" id="notifyToggle" name="notifyToggle" value="notifyToggle" >
            <label for="notifyToggle">Browser notification on touch</label><br>

            <input type="checkbox" id="showMask" name="showMask" value="showMask" checked>
            <label for="showMask">Display the segmentation mask</label><br>

            <input type="checkbox" id="showPoints" name="showPoints" value="showPoints" checked>
            <label for="showPoints">Display detection points</label><br>

            <p>Trade off speed for accuracy:</p>
            <button id="highSpeed" disabled>Faster</button>
            <button id="normalSpeed" disabled>Normal</button>
            <button id="lowerSpeed" disabled>More accurate</button>
            <button id="lowSpeed" disabled>Most accurate</button>


            <button id="reset">Exit / Restart</button>
            <div id="usageNoteSide"></div>
        </div>
    </div>
</div>
<div id="credits">
        <div id='myDiv'><!-- Plotly chart will be drawn inside this DIV --></div>
</div>
<script src="ui-helper.js"></script>
<script src="detect.js"></script>

</body>
</html>
